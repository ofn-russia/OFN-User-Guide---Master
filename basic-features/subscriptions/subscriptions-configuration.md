# Настройка

## Активация подписок

Чтобы активировать функцию подписки для вашего предприятия, выберите Предприятия -&gt; Настройки -&gt; [настройки магазина](../enterprise-profile/enterprise-settings.md#shop-preferences).

Внизу страницы измените Подписки на 'включено'

![](../../.gitbook/assets/subscriptions1.jpg)

**Гостевые заказы:** Для предприятий с включенными подписками мы рекомендуем, чтобы все клиенты входили в систему, прежде чем они смогут совершать покупки у вас. Это гарантирует, что любой клиент с подпиской войдет в систему и увидит свой существующий заказ на подписку, а случайно не разместит повторный заказ.

**Изменение заказов**: для клиентов с регулярным повторяющимся заказом на вашем предприятии по подписке, следующие варианты подразумевают:

* _Размещенные заказы не могут быть изменены/отменены_: клиент должен будет связаться с вами, чтобы изменить свой обычный заказ \(изменить количество каждого запрошенного товара или отменить заказ\).
* _Клиенты могут изменять/отменять заказы пока цикл заказа открыт_: клиент может изменить количество товаров, которое он запрашивает в своей подписке и/или отменить весь заказ.

{% hint style="info" %}
Во всех случаях, если клиент с заказом на подписку желает приобрести товар, который не является частью его обычного заказа, он должен будет сделать вторую корзину и оформить заказ. _Ни вы, ни они не могут добавлять новые товары в свой заказ на подписку после того, как цикл заказа открыт._
{% endhint %}

## Способы Доставки и Оплаты для Подписок

Когда вы создаете подписку клиента, вам нужно выбрать способ доставки, который он будет использовать и способ оплаты, по которому будет выставлен счет. Это впоследствии будет применяться ко всем следующим заказам, размещенным от его имени посредством подписок.

### **Методы доставки**

К подписке вы можете применить любой [метод дотавки/оплаты](../shopfront/shipping-methods.md).

### **Методы оплаты**

Вы можете назначить подписке только два [метода оплаты](../shopfront/payment-methods.md).

1. **Ручные способы оплаты**: наличными, чеком, банковским переводом \(т.е. любым способом, который не предполагает автоматической проверки в режиме онлайн платформой ОСП\).
2. **Stripe:** Stripe - это платежный шлюз, который принимает платежи с помощью кредитных карт. Подробную информацию о настройке платежей Stripe для вашего предприятия можно найти [здесь](../shopfront/payment-methods.md#integrated-payment-providers).

{% hint style="info" %}
С каждым заказом, автоматически размещаемым по подписке, с банковской карты клиента будет списываться сумма для оплаты заказа \(после закрытия соответствующего цикла заказа\). Сумма списания будет отражать любые изменения, внесенные вами или ими в заказ.  
С клиентов не будет взиматься плата, если они отменят свой заказ подписки.
{% endhint %}

{% hint style="warning" %}
Для правильного списания средств с клиентов, необходимо иметь учетную запись на платформе Открытая Сеть Продуктов. На свою учетную запись ОСП они должны иметь зарегистрированную кредитную карту по умолчанию и дать разрешение вашему предприятию на списание средств с этой карты. Более подробную информацию можно найти [здесь](subscriptions-the-customers-perspective.md#saving-credit-cards-and-authorising-charges).
{% endhint %}

{% hint style="success" %}
Если вы используете Stripe в качестве способа оплаты подписок, клиенту будет полезно, если вы добавите четкое и подробное объяснение того, как будет обрабатываться платеж, если он выберет эту опцию.

Например, вместо того, чтобы называть [способ оплаты](../shopfront/payment-methods.md) 'Кредитная карта', вы можете назвать его 'автоматическим выставлением счетов по кредитной карте за подписки'. Возможным описанием может быть 'С вашей кредитной карты по умолчанию, сохраненной в вашей учетной записи ОСП, будет списана сумма, когда ваш заказ на подписку будет подтвержден в среду вечером'. Это имя и описание будут отображаться в электронном письме с подтверждением клиентам-подписчикам \(см. пример ниже\), поэтому лучше указать подробности, чтобы клиент знал, чего ожидать.
{% endhint %}

![](../../.gitbook/assets/image%20%2815%29.png)

## Сбор информации с ваших клиентов

Чтобы настроить подписку для клиента, вам необходимо получить от него некоторую информацию, как описано ниже:

**Имя, номер телефона** и **email:** Помните, что любой клиент, желающий иметь автоматический регулярный заказ \(подписку\) на вашем предприятии, ДОЛЖЕН иметь зарегистрированную и подтвержденную учетную запись пользователя на платформе ОСП. Клиенты с подписками должны быть в [Списке Клиентов](../shopfront/customer-management-and-conditional-displays-prices/customers.md) вашего предприятия. Подробности смотрите [ниже](subscriptions-configuration.md#add-your-subscribers-to-your-customer-list).

**Адрес для выставления счетов и доставки**

**Товары**: Какие товары они хотят включить в свою подписку?

**Метод Доставки**: Вам необходимо назначить метод доставки/самовывоза для их заказа по подписке. Как бы они предпочли получить товар?

**Метод Оплаты**: клиенты могут выбрать один из способов оплаты вручную \(например, наличными, банковским переводом\) или оплатить с помощью кредитной карты через счет Stripe в вашем магазине. Если клиент желает оплатить свои заказы на подписку через Stripe, ему нужно будет добавить платежную карту по умолчанию и дать разрешение. Смотрите [здесь](subscriptions-the-customers-perspective.md#saving-credit-cards-and-authorising-charges) для более подробной информации.

**Начальная и конечная даты их заказов по подписке**: Помните, что для заказа по подписке, который будет создан для данного цикла заказа, он должен иметь дату начала либо до, либо после даты открытия цикла заказа, а дата окончания подписки должна быть после даты закрытия цикла заказа.

## Добавьте своих подписчиков в свой список клиентов

Прежде чем вы сможете настроить заказ подписки для клиента, его необходимо добавить в [список Клиентов](../shopfront/customer-management-and-conditional-displays-prices/customers.md).

**После того, как вы добавили своих клиентов в свой список клиентов, отправьте им электронное письмо** и [попросите их зарегистрировать учетную запись в ОСП](subscriptions-the-customers-perspective.md#signing-up-to-ofn). Если вы планируете выставлять счета клиентам, использующим Stripe, вам также необходимо попросить их выполнить дополнительные действия, описанные [здесь](subscriptions-the-customers-perspective.md#saving-credit-cards-and-authorising-charges), для добавления кредитной/дебетовой карты по умолчанию к их учетной записи пользователя ОСП и предоставления вашему предприятию разрешения на прием платежей.

{% hint style="info" %}
Вы можете добавлять покупателей в свой список Клиентов до или после того, как они зарегистрируют учетную запись в ОСП. Однако, прежде чем заказ на подписку может быть успешно настроен, клиент должен подтвердить адрес электронной почты, на который зарегистрирована его учетная запись ОСП.
{% endhint %}

{% hint style="warning" %}
Если вы хотите списать средства клиента по его заказу на подписку с помощью Stripe, он должен быть добавлен в ваш [список Клиентов](../shopfront/customer-management-and-conditional-displays-prices/customers.md) ДО того, как он сможет [разрешить вашему предприятию принимать платежи](subscriptions-the-customers-perspective.md#saving-credit-cards-and-authorising-charges) со своей кредитной/дебетовой карты.  
Поэтому мы рекомендуем следующую процедуру:

1. Свяжитесь с клиентом и получите всю необходимую вам информацию \(см. [выше](subscriptions-configuration.md#gather-information-from-your-customers)\)
2. Дбавьте его в ваш [список Клиентов](../shopfront/customer-management-and-conditional-displays-prices/customers.md).
3. Отправьте электронное письмо клиенту, попросив его [зарегистрироваться в ОСП](subscriptions-the-customers-perspective.md#signing-up-to-ofn) для создания учетной записи и [добавить данные своей банковской карты](subscriptions-the-customers-perspective.md#saving-credit-cards-and-authorising-charges) в эту учетную запись.
4. [Создайте подписку](subscriptions-creating-and-managing-orders.md).
{% endhint %}

## Распиания

{% hint style="info" %}
Если вы новичок в ОСП, мы рекомендуем вам ознакомиться с настройкой [циклов заказов](../shopfront/order-cycle/) перед настройкой расписаний и подписок.
{% endhint %}

### О Расписаниях

Подписки настраиваются таким образом, чтобы каждый раз, когда предприятие открывало цикл заказов, заказы, у которых есть подписка на этот магазин, могли автоматически генерироваться. Частота, с которой оформляется заказ на подписку для конкретного клиента \(т.е. какой из ваших активных циклов заказов запускает их подписку\), контролируется средством под названием '**Расписания'**.

Расписания - это группы, которым можно назначить цикл заказа. После создания расписания, подписки клиентов применяются к расписанию, поэтому заказ на их подписку будет создаваться только для новых циклов заказов в этом распиании.

{% hint style="info" %}
У вас могут быть клиенты, которым нужен регулярный заказ каждую неделю, и в этом случае вы добавляете их подписки в распиание, которое включает все ваши еженедельные циклы заказов. Для других групп клиентов, желая, чтобы их заказы выполнялись только раз в две недели/в месяц, вы можете создавать дополнительные расписания, которые включают только чередование/один из четырех ваших еженедельных циклов заказов.
{% endhint %}

{% hint style="success" %}
Эта схема обладает большой гибкостью, поэтому не стесняйтесь экспериментировать, чтобы найти комбинацию цикл заказов - расписание, которая лучше всего подходит для вашего предприятия. Например, вы можете захотеть иметь распиания 'нечетная неделя' и 'четная неделя', 'оптовые' распиания, расписание 'ежемесячное мясо' ....
{% endhint %}

### Создание расписания

Выполнив все описанные выше шаги, кнопка **+Новое Расписание** появится в верхней части меню Циклы Заказов:

![](../../.gitbook/assets/ordercycle1.jpg)

{% hint style="warning" %}
Для создания нового расписания необходимо наличие хотя бы одного открытого цикла заказа.
{% endhint %}

![](../../.gitbook/assets/new-schedule.bin)

**Имя**: Присвойте расписанию логическое имя, описывающее эту группу циклов заказа. Например, 'еженедельно', 'ежемесячно', 'Поставки по Вторникам', 'оптом' или 'в розницу'. Это имя не видно клиентам.

{% hint style="info" %}
Если Вы управляете несколькими предприятиями ОСП, при этом подписки включены больше чем в одном, то обозначение Ваших расписаний очень важно, например. еженедельно\_центрА, еженедельно\_центрБ, двухнедельно\_центрА, двухнедельно\_центрБ. Каждому предприятию потребуется отдельное расписание, но при создании подписки для клиента расписания для всех предприятий будут видны. Следовательно, описательное имя поможет вам убедиться, что подписка создана для правильного предприятия для данного клиента.
{% endhint %}

Можно добавить существующие циклы заказов в новое расписание и из него, нажав кнопки &lt; и &gt;.

По завершении нажмите кнопку **Создать**.

### Изменение или Удаление расписания

Чтобы изменить или удалить расписание, щелкните на имя расписания рядом с соответствующим циклом заказа в столбце 'расписания'. \(Столбец 'Расписания' может потребоваться сделать видимым, установив флажок в раскрывающемся меню столбцов вверху справа.\)

![](../../.gitbook/assets/show-schedules.bin)

Можно изменить имя расписания, добавить/удалить из него циклы заказа или удалить расписание.

![](../../.gitbook/assets/delete-schedule.bin)

{% hint style="danger" %}
Невозможно удалить расписание, если с ним связаны подписки.
{% endhint %}

### Добавление или удаление циклов заказа из расписаний

Можно добавлять и удалять циклы заказов из расписаний путем редактирования графика \([выше](subscriptions-configuration.md#edit-or-delete-a-schedule)\) или путем редактирования цикла заказа и добавления/удаления расписания в поле 'расписания':

![](../../.gitbook/assets/ordercycle3.jpg)

{% hint style="success" %}
Циклы заказа могут иметь несколько расписаний. Например, если циклы заказа являются еженедельными, но у вас есть три расписания \(еженедельные, двухнедельные-нечетные недели и двухнедельные-четные недели\), то один цикл заказа может быть связан как с 'недельными', так и 'двухнедельными-нечетными' недельными расписаниями.
{% endhint %}

